<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bongo Cat ESP32 Installer</title>
    <script type="module" src="https://unpkg.com/esp-web-tools@10/dist/web/install-button.js?module"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .hero-image {
            margin: 30px 0;
            text-align: center;
        }

        .hero-image img {
            max-width: 300px;
            width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }

        .description {
            font-size: 1.2rem;
            color: #555;
            margin: 30px 0;
            text-align: center;
            line-height: 1.7;
        }

        .installation-section {
            background: white;
            border-radius: 12px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .installation-section h2 {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 30px;
            font-weight: 400;
        }

        .installation-steps {
            list-style: none;
            counter-reset: step-counter;
        }

        .installation-steps li {
            counter-increment: step-counter;
            margin: 15px 0;
            padding-left: 40px;
            position: relative;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .installation-steps li::before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #3498db;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .install-button-container {
            text-align: center;
            margin: 40px 0;
        }

        esp-web-install-button {
            --esp-tools-button-color: #3498db;
            --esp-tools-button-text-color: white;
            --esp-tools-button-background: #3498db;
            --esp-tools-button-border-radius: 8px;
            --esp-tools-button-padding: 12px 24px;
            font-size: 16px;
        }

        esp-web-install-button button {
            background: #3498db !important;
            color: white !important;
            border: none !important;
            padding: 12px 24px !important;
            border-radius: 8px !important;
            font-size: 16px !important;
            font-weight: 500 !important;
            cursor: pointer !important;
            transition: background-color 0.3s ease !important;
        }

        esp-web-install-button button:hover {
            background: #2980b9 !important;
        }

        .browser-note {
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            color: #e74c3c;
        }

        .responsive-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }

        .pc-app-section {
            background: white;
            border-radius: 12px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
        }

        .pc-app-section h2 {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 400;
            text-align: center;
        }

        .pc-app-section h3 {
            font-size: 1.4rem;
            color: #2c3e50;
            margin: 30px 0 20px 0;
            font-weight: 500;
        }

        .app-description {
            font-size: 1.1rem;
            color: #555;
            text-align: center;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .download-container {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .download-button {
            display: inline-block;
            background: #27ae60;
            color: white;
            padding: 15px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            font-size: 1.1rem;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }

        .download-button:hover {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .download-note {
            margin-top: 10px;
            color: #666;
            font-size: 0.9rem;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .feature-item h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .feature-item p {
            color: #555;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .screenshot-placeholder {
            background: #e9ecef;
            border: 2px dashed #adb5bd;
            border-radius: 6px;
            padding: 20px;
            text-align: center;
            color: #6c757d;
            font-style: italic;
            min-height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .screenshot-placeholder.large {
            min-height: 200px;
            margin: 20px 0;
        }

        .setup-steps {
            margin: 30px 0;
        }

        .setup-list {
            list-style: none;
            counter-reset: setup-counter;
        }

        .setup-list li {
            counter-increment: setup-counter;
            margin: 15px 0;
            padding-left: 40px;
            position: relative;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .setup-list li::before {
            content: counter(setup-counter);
            position: absolute;
            left: 0;
            top: 0;
            background: #27ae60;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }

        .app-instructions {
            margin: 30px 0;
        }

        .instruction-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .instruction-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #27ae60;
            text-align: center;
        }

        .instruction-item h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .instruction-item p {
            color: #555;
            line-height: 1.5;
            margin-bottom: 15px;
        }

        .instruction-image {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .features-list {
            list-style: none;
            padding: 0;
        }

        .features-list li {
            background: #f8f9fa;
            margin: 10px 0;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }

        .animations-showcase {
            margin: 30px 0;
        }

        .animations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .animation-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .animation-item h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .animation-gif {
            max-width: 100%;
            height: auto;
            border-radius: 6px;
            background: white;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .header, .installation-section, .pc-app-section {
                padding: 20px;
            }
            
            .hero-image img {
                max-width: 250px;
            }

            .features-grid, .instruction-grid, .animations-grid {
                grid-template-columns: 1fr;
            }

            .download-button {
                padding: 12px 20px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Bongo Cat ESP32 Installer</h1>
            
            <div class="hero-image">
                <img src="web resources/cat1.png" alt="Bongo Cat" class="responsive-image">
            </div>

            <p class="description">
                Bongo Cat is a cute digital pet that will type with you. It can show CPU, RAM, and your typing speed in words per minute as well as time. Bongo cat will type faster if you type faster, featuring adorable animations and expressions that bring joy to your desk. Now available as a cross-platform desktop app for both Windows and Mac! The hardware is open source, costs around $10 to build, and flashes in seconds with no soldering required.
            </p>
        </div>

        <div class="installation-section">
            <h2>Software Installation Instructions</h2>
            
            <p style="text-align: center; font-size: 1.1rem; margin-bottom: 30px; color: #e74c3c; font-weight: 600;">
                ‚ö†Ô∏è Choose the correct board size below - 2.4 inch or 2.8 inch display
            </p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; margin: 30px 0;">
                <!-- 2.4 inch Board Section -->
                <div style="background: #f8f9fa; border-radius: 12px; padding: 30px; border: 2px solid #3498db;">
                    <h3 style="color: #3498db; margin-bottom: 20px; text-align: center; font-size: 1.4rem;">2.4 Inch Display Board</h3>
                    
                    <ol class="installation-steps">
                        <li>Connect your ESP32 board with <strong>2.4 inch TFT display</strong> to your computer's USB port.</li>
                        <li>Click the 'Connect' button below. <strong>This will only work in Google Chrome or Microsoft Edge.</strong></li>
                        <li>When prompted to choose a port, choose "USB Serial".</li>
                        <li>Click 'Install Bongo Cat'.</li>
                    </ol>

                    <div class="install-button-container">
                        <esp-web-install-button 
                            id="install-button-24"
                            manifest="./manifest.json">
                            <button slot="activate">Connect 2.4" Board</button>
                            <span slot="unsupported">Your browser doesn't support Web Serial. Please use Chrome, Edge, or Opera.</span>
                            <span slot="not-allowed">HTTPS required for Web Serial. Please use a web server.</span>
                        </esp-web-install-button>
                    </div>
                    
                    <p style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: #666;">
                        Most common board type
                    </p>
                </div>
                
                <!-- 2.8 inch Board Section -->
                <div style="background: #f8f9fa; border-radius: 12px; padding: 30px; border: 2px solid #e67e22;">
                    <h3 style="color: #e67e22; margin-bottom: 20px; text-align: center; font-size: 1.4rem;">2.8 Inch Display Board</h3>
                    
                    <ol class="installation-steps">
                        <li>Connect your ESP32 board with <strong>2.8 inch TFT display</strong> to your computer's USB port.</li>
                        <li>Click the 'Connect' button below. <strong>This will only work in Google Chrome or Microsoft Edge.</strong></li>
                        <li>When prompted to choose a port, choose "USB Serial".</li>
                        <li>Click 'Install Bongo Cat'.</li>
                    </ol>

                    <div class="install-button-container">
                        <esp-web-install-button 
                            id="install-button-28"
                            manifest="./manifest-2.8inch.json">
                            <button slot="activate">Connect 2.8" Board</button>
                            <span slot="unsupported">Your browser doesn't support Web Serial. Please use Chrome, Edge, or Opera.</span>
                            <span slot="not-allowed">HTTPS required for Web Serial. Please use a web server.</span>
                        </esp-web-install-button>
                    </div>
                    
                    <p style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: #666;">
                        Newer, larger display version
                    </p>
                </div>
            </div>

            <p class="browser-note">Both installations only work in Google Chrome or Microsoft Edge.</p>
            
            <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 20px; margin: 20px 0; text-align: center;">
                <p style="margin: 0; color: #856404; font-weight: 600; font-size: 1.1rem;">
                    üí° <strong>Troubleshooting Tip:</strong> If the flashing takes more than 15 minutes or gets stuck at "Initializing", press and hold the <strong>BOOT</strong> button on your ESP32 board while using webflasher.
                </p>
            </div>

        </div>

        <div class="pc-app-section">
            <h2>Desktop Application Download</h2>
            
            <p class="app-description">
                After flashing your ESP32, you'll need the Bongo Cat desktop application to enable the interactive features. 
                The new cross-platform Electron app communicates with your ESP32 to send typing data, system stats, and control animations.
                Now available for both Windows and Mac!
            </p>

            <div class="features-grid">
                <div class="feature-item">
                    <h4>ü™ü Windows Application</h4>
                    <p>Legacy Windows installer with full functionality</p>
                    <div class="download-container">
                        <a href="BongoCat_Release/BongoCat_Installer.zip" class="download-button" download>
                            üì¶ Download Windows Installer ZIP
                        </a>
                        <p class="download-note">Compatible with Windows 10/11</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <h4>üçé Mac Application (New!)</h4>
                    <p>Cross-platform Electron app with the same great features</p>
                    <div class="download-container">
                        <a href="https://github.com/vostoklabs/bongo_cat_monitor/releases/latest" class="download-button" target="_blank">
                            üì± Download Mac App
                        </a>
                        <p class="download-note">Compatible with macOS 10.14+</p>
                    </div>
                </div>
            </div>

            <div class="setup-steps">
                <h3>Setup Steps After Flashing:</h3>
                
                <h4>Windows Setup:</h4>
                <ol class="setup-list">
                    <li>Download the <strong>BongoCat_Installer.zip</strong> file and extract it</li>
                    <li>Run the <strong>BongoCat_Setup.exe</strong> installer from the extracted files</li>
                    <li>The app will automatically find your ESP32 board and connect</li>
                    <li>The app runs from the system tray - look for the Bongo Cat icon</li>
                    <li>Start typing and watch your Bongo Cat come to life! üéâ</li>
                </ol>
                
                <h4>Mac Setup:</h4>
                <ol class="setup-list">
                    <li>Download the latest <strong>Bongo Cat Monitor</strong> app from the GitHub releases</li>
                    <li>Open the downloaded <strong>.dmg</strong> file and drag the app to your Applications folder</li>
                    <li>Launch the app from Applications (you may need to allow it in Security & Privacy settings)</li>
                    <li>Connect your ESP32 to your Mac via USB cable</li>
                    <li>In the app, select the correct USB port to connect to your ESP32</li>
                    <li>Once connected, the app will communicate with your ESP32 via USB</li>
                    <li>Start typing and watch your Bongo Cat come to life! üéâ</li>
                </ol>
            </div>

            <div class="app-instructions">
                <h3>How to Use:</h3>
                <div class="instruction-grid">
                    <div class="instruction-item">
                        <h4>üñ±Ô∏è System Access</h4>
                        <p><strong>Windows:</strong> The app runs from your system tray. Click the Bongo Cat icon to access options.<br>
                        <strong>Mac:</strong> The app appears in your menu bar. Click the icon to access settings and controls.</p>
                        <img src="web resources/tray screenshot.png" alt="System tray screenshot" class="instruction-image">
                    </div>
                    
                    <div class="instruction-item">
                        <h4>‚öôÔ∏è Settings</h4>
                        <p>Right-click (Windows) or click (Mac) the icon to configure what information is shown and set sleep time.</p>
                        <img src="web resources/settings.png" alt="Settings screenshot" class="instruction-image">
                    </div>
                    
                    <div class="instruction-item">
                        <h4>üçé Mac Troubleshooting</h4>
                        <p>If the app won't open, go to System Preferences ‚Üí Security & Privacy ‚Üí General and click "Open Anyway" next to the blocked app warning.</p>
                    </div>
                    
                    <div class="instruction-item">
                        <h4>üîó USB Connection</h4>
                        <p>Select the correct USB port in the app to connect to your ESP32. Make sure your ESP32 is connected to your computer via USB cable.</p>
                    </div>
                </div>
            </div>

            <div class="app-features">
                <h3>What the App Can Do:</h3>
                <ul class="features-list">
                    <li><strong>üéπ Typing Detection:</strong> Detects your keyboard activity and triggers adorable bongo animations</li>
                    <li><strong>üìä System Stats:</strong> Shows real-time CPU usage, RAM consumption, and Words Per Minute (WPM)</li>
                    <li><strong>‚è∞ Time Display:</strong> Shows current time on your ESP32 display</li>
                    <li><strong>üé® Multiple Animations:</strong> Various cat expressions and speed-responsive animations</li>
                    <li><strong>üí§ Sleep Mode:</strong> Cat goes to sleep when idle with customizable sleep timer</li>
                    <li><strong>üåê Cross-Platform:</strong> Works seamlessly on both Windows and Mac with the same features</li>
                    <li><strong>üì° USB Communication:</strong> Connects to your ESP32 via USB for reliable data transfer</li>
                </ul>
            </div>

            <div class="animations-showcase">
                <h3>Animation Examples:</h3>
                <div class="animations-grid">
                    <div class="animation-item">
                        <h4>Normal Typing</h4>
                        <img src="web resources/typing.gif" alt="Normal typing animation" class="animation-gif">
                    </div>
                    
                    <div class="animation-item">
                        <h4>Fast Typing</h4>
                        <img src="web resources/typing fast.gif" alt="Fast typing animation" class="animation-gif">
                    </div>
                    
                    <div class="animation-item">
                        <h4>Sleeping</h4>
                        <img src="web resources/sleeping.gif" alt="Sleeping animation" class="animation-gif">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get both install buttons
            const installButton24 = document.querySelector('#install-button-24');
            const installButton28 = document.querySelector('#install-button-28');
            
            // ESP32 USB vendor IDs for filtering
            const esp32VendorIds = [0x10C4, 0x1A86, 0x303A, 0x0403, 0x2341, 0x239A, 0x1B4F];
            
            // Create ESP32-only port filters
            const esp32Filters = esp32VendorIds.map(id => ({ usbVendorId: id }));
            
            // Function to setup install button
            function setupInstallButton(button, boardSize, originalText) {
                if (!button) return;
                
                // Set the port filters on the ESP Web Tools button
                button.setAttribute('port-filters', JSON.stringify(esp32Filters));
                
                // Add visual feedback for the installation process
                button.addEventListener('state-changed', function(e) {
                    const activateButton = button.querySelector('button[slot="activate"]');
                    if (!activateButton) return;
                    
                    switch(e.detail.state) {
                        case 'initializing':
                            activateButton.textContent = 'Detecting ESP32...';
                            break;
                        case 'preparing':
                            activateButton.textContent = 'Preparing to Install';
                            break;
                        case 'manifest':
                            activateButton.textContent = 'Loading Firmware...';
                            break;
                        case 'erasing':
                            activateButton.textContent = 'Erasing Flash...';
                            break;
                        case 'writing':
                            activateButton.textContent = `Installing Bongo Cat ${boardSize}"`;
                            break;
                        case 'finished':
                            activateButton.textContent = 'Installation Complete!';
                            setTimeout(() => {
                                activateButton.textContent = originalText;
                            }, 3000);
                            break;
                        case 'error':
                            activateButton.textContent = 'Installation Failed';
                            setTimeout(() => {
                                activateButton.textContent = originalText;
                            }, 3000);
                            break;
                        default:
                            activateButton.textContent = originalText;
                    }
                });
            }
            
            // Setup both buttons
            setupInstallButton(installButton24, '2.4', 'Connect 2.4" Board');
            setupInstallButton(installButton28, '2.8', 'Connect 2.8" Board');
            
            console.log('ESP Web Tools initialized for both 2.4" and 2.8" boards with ESP32 filters');
        });
    </script>
</body>
</html> 